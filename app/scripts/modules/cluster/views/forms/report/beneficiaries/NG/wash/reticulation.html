
<!-- for each activity -->
<h5 class="report-location-title" style="padding-top:0px;">{{ beneficiary.activity_detail_name }} Details</h5>
	
	<!-- repeat -->
  <div class="card-panel" ng-repeat="reticulation in beneficiary.reticulations" 
  			ng-init="$reticulationIndex = $index">

	  <!-- reticulation title / btns -->
	  <div class="row">
	  	<div class="col s12 m6">
				<h5 style="font-size: 1.32rem; padding-bottom:10px;">Reticulation Site {{ $reticulationIndex+1 }}</h5>
			</div>
			<div class="col s12 m6">
  			<div class="btn-floating waves-effect waves-light red lighten-2 right" 
	  					title="Remove Reticulation"
	  					ng-show="project.report.report_status !== 'complete'"
	  					ng-click="ngmClusterHelperNgWash.removeModal( project, beneficiary, 
	  																													$reticulationIndex, 'reticulations', '#reticulation-modal' )">
  				<i class="material-icons">clear</i>
  			</div>

			</div>
		</div>

		<div class="row">

			<div class="input-field col s12 m4">
	      <input id="ngm-taps_number_connected-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
				      	name="taps_number_connected"
				      	type="number" 
				      	class="validate" 
				      	min="0"
				      	ng-model="reticulation.taps_number_connected"
				      	ng-disabled="project.report.report_status === 'complete' || !rowform.$visible"
								required>
	      <label for="ngm-taps_number_connected-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
	      				class="active">Taps Connected (Number)</label>
			</div>

			<div class="input-field col s12 m4">
      	<select id="ngm-from_chlorinated_system-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}" 
	      					name="from_chlorinated_system"
	      					class="validate"
	      					ng-options="type.from_chlorinated_system_id as 
	      												type.from_chlorinated_system_name for 
	      												type in ngmClusterHelperNgWashLists.lists.from_chlorinated_systems"
	      					ng-model="reticulation.from_chlorinated_system_id"
	      					ng-change="ngmClusterHelperNgWash.selectChange( reticulation, 
	      																			'from_chlorinated_systems',
	      																			'from_chlorinated_system_id', 
	      																			'from_chlorinated_system_name',
	      																			'ngm-from_chlorinated_system-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}' )"
	      					ng-disabled="project.report.report_status === 'complete' || !rowform.$visible"
	      					required>
				<option value="">Select...</option>
				</select>
	      <label for="ngm-from_chlorinated_system-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}" 
	      				class="active" style="transform:translateY(-10%)">From Chlorinated System?</label>
			</div>

			<div class="input-field col s12 m4">
      	<select id="ngm-water_turbidity_range-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}" 
	      					name="water_turbidity_range"
	      					class="validate"
	      					ng-options="type.water_turbidity_range_id as 
	      												type.water_turbidity_range_name for 
	      												type in ngmClusterHelperNgWashLists.lists.water_turbidity_ranges"
	      					ng-model="reticulation.water_turbidity_range_id"
	      					ng-change="ngmClusterHelperNgWash.selectChange( reticulation, 
	      																			'water_turbidity_ranges',
	      																			'water_turbidity_range_id', 
	      																			'water_turbidity_range_name',
	      																			'ngm-water_turbidity_range-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}' )"
	      					ng-disabled="project.report.report_status === 'complete' || !rowform.$visible"
	      					required>
				<option value="">Select...</option>
				</select>
	      <label for="ngm-water_turbidity_range-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}" 
	      				class="active" style="transform:translateY(-10%)">Water Turbidity Range (NTU)</label>
			</div>

		</div>

		<div class="row">

      <div class="input-field col s12 m6">
        <input id="ngm-activity_start_date-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
        		ngm-date
            type="text"
            name="created"
            ng-model="reticulation.activity_start_date"
            format="dd mmm, yyyy"
            max="{{ reticulation.activity_end_date }}"
            on-close="ngmClusterBeneficiaries.datepicker.startOnClose( reticulation, reticulation.activity_start_date )"
            ng-disabled="project.definition.project_status === 'complete' || !rowform.$visible"
            e-required/>
	      <label for="ngm-activity_start_date-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
	      				class="active">Activity Start Date</label>
      </div>

      <div class="input-field col s12 m6">
        <input id="ngm-activity_end_date-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
        		ngm-date
            type="text"
            name="created"
            ng-model="reticulation.activity_end_date"
            format="dd mmm, yyyy"
            min="{{ reticulation.activity_start_date }}"
            on-close="ngmClusterBeneficiaries.datepicker.endOnClose( reticulation, reticulation.activity_end_date )"
            ng-disabled="project.definition.project_status === 'complete' || !rowform.$visible"
            e-required/>
	      <label for="ngm-activity_end_date-{{ $locationIndex }}-{{ $beneficiaryIndex }}-{{ $reticulationIndex }}"
	      				class="active">Activity End Date</label>            
      </div>

		</div>


  </div>

  <!-- add new reticulation -->
  <button class="btn blue" 
          ng-show="project.report.report_status !== 'complete'" 
          ng-click="rowform.$show(); 
          						ngmClusterHelperNgWash.init_material_select();
          						ngmClusterHelperNgWash.addReticulation( location, beneficiary )">
    <i class="material-icons left">add</i>Add Reticulation
  </button>

<script>
  // init
  setTimeout(function(){ 
  	$( '.input-field select' ).material_select(); 
  	setTimeout(function(){ $( '.input-field select' ).material_select(); }, 460 );
	}, 200 );
</script>
